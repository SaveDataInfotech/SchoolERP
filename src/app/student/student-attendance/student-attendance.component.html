<div class="container-fluid">
    <mat-card class="mt-2 matcard">
        <mat-card-content>            
            <div class="row">
                <div class="col-sm-6" style="display: flex;">
                    <div style="float: left;width: 300px;">
                        <h3 class="ml-1">Student Attendance</h3>
                    </div>
                </div>
                <div class="col-sm-6" style="text-align:right;cursor: pointer;" title="Click to Back"><button
                        (click)="backButton()" class="homeicon"><span><mat-icon>home</mat-icon></span></button>
                </div>
            </div>
            <form #AttendanceForm="ngForm" (ngSubmit)="save(studentList)">
                <div class="row">
                    <div class="col-sm-5">
                        <div class="row">
                            <div class="col-sm-12 mt-2" style="display: flex;">
                                <div class="labeldiv">
                                    <label class="pt-3" style="margin: auto;">Date<span class="text-danger">
                                            *</span></label>
                                </div>
                                <div class="inputdiv">
                                    <input [disabled]="serachDisabled == true" [min]="minDate" [max]="today"
                                        placeholder="Enter 10-th Mark" name="date" [value]="today"
                                        [(ngModel)]="studentAttendanceForm.date" class="form-control" type="date"
                                        required>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 mt-3" style="display: flex;">
                                <div class="labeldiv">
                                    <label class="pt-2" style="margin: auto;">Class<span class="text-danger">
                                            *</span></label>
                                </div>
                                <div class="inputdiv">
                                    <select [(ngModel)]="studentAttendanceForm.classid" style="width: 100%;" #t
                                        (change)="filterGroupfun(t.value)" class="form-control " name="classid">
                                        <option value=0 selected disabled>Please select</option>
                                        <option [disabled]="serachDisabled == true" value={{class.classid}}
                                            *ngFor="let class of ClassList;">
                                            {{class.class_name}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="groupFilterlist.length != 0" class="row">
                            <div class="col-sm-12 mt-3" style="display: flex;">
                                <div class="labeldiv">
                                    <label class="pt-2" style="margin: auto;">Group</label>
                                </div>
                                <div class="inputdiv">
                                    <select [(ngModel)]="studentAttendanceForm.groupid" style="width: 100%;" #s
                                        (change)="filterSectionfun(s.value)" class="form-control" name="groupid">
                                        <option value=0 selected disabled>Please select</option>
                                        <option [disabled]="serachDisabled == true" value={{group.groupid}}
                                            *ngFor="let group of groupFilterlist;">
                                            {{group.group_name}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="col-sm-12 mt-3" style="display: flex;float: left;">
                                <div class="labeldiv">
                                    <label class="pt-2" style="margin: auto;">Section<span class="text-danger">
                                            *</span></label>
                                </div>
                                <div style="display: flex;" class="inputdiv">
                                    <select [(ngModel)]="studentAttendanceForm.sectionid" style="width: 100%;"
                                        class="form-control " name="sectionid">
                                        <option value=0 selected disabled>Please select</option>
                                        <option [disabled]="serachDisabled == true" [ngValue]="section.sectionid"
                                            *ngFor="let section of sectionFilterlist;">
                                            {{section.section_name}}</option>
                                    </select>
                                </div>
                                <div class="mt-1">
                                    <button style="float: left;" matTooltip="Click to Search"
                                        (click)="searchStudentByClass()" type="button"
                                        class="btn btn-primary btn-sm ml-2">Search<i
                                            class="fa fa-search ml-2"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div *ngIf="serachDisabled == true" class="col-sm-7">
                        <table class="col-sm-12 table table-hover table-bordered table-sm mt-3">
                            <thead>
                                <tr>
                                    <th>Si.No</th>
                                    <th>A.NO</th>
                                    <th>Student Name</th>
                                    <th><mat-checkbox [disabled]="fni == true" class="example-margin matlabel"
                                            [checked]="allComplete" [indeterminate]="fnsomeComplete()"
                                            (change)="fnsetAll($event.checked)">FN
                                        </mat-checkbox></th>
                                    <th><mat-checkbox [disabled]="ani == true" class="example-margin matlabel"
                                            [checked]="anAllComplete" [indeterminate]="ansomeComplete()"
                                            (change)="ansetAll($event.checked)">AN
                                        </mat-checkbox></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let student of studentList;let i=index;">
                                    <td>{{i+1}}</td>
                                    <td>{{student.admission_no}}</td>
                                    <td>{{student.student_name}}</td>
                                    <td>
                                        <input type="checkbox" name="fns{{i}}" #fns="ngModel" [disabled]="fni == true"
                                            [(ngModel)]="student.fn" (ngModelChange)="fnupdateAllComplete()">
                                        <span class="pl-2 text-success" *ngIf="student.fn == true"><b>P</b></span><span
                                            class="pl-2 text-danger" *ngIf="student.fn == false"><b>A</b></span>

                                    </td>
                                    <td><input [(ngModel)]="student.an" name="ans{{i}}" #ans="ngModel"
                                            [disabled]="ani == true" (ngModelChange)="anupdateAllComplete()"
                                            type="checkbox">
                                        <span class="pl-2 text-success" *ngIf="student.an == true"><b>P</b></span><span
                                            class="pl-2 text-danger" *ngIf="student.an == false"><b>A</b></span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="col-sm-12 mt-4">
                            <div style="text-align: center;">
                                <input matTooltip="Click to Save" type="submit" style="width: 80px;"
                                    class="btn btn-primary mr-3 btn-sm" value="Save" />
                                <input matTooltip="Click to Cancel" type="button" (click)="cancelClick()"
                                    style="width: 80px;" class="btn btn-danger btn-sm mr-2" value="Cancel" />
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>