<div class="container-fluid mt-1">
    <mat-card class="mt-2 matcard mb-5">
        <mat-card-content>
            <div class="row">
                <div class="col-sm-6" style="display: flex;">
                    <div style="float: left;width: 300px;">
                        <h3 class="ml-1">Staff Assign</h3>
                    </div>
                </div>
                <div class="col-sm-6" style="text-align:right;cursor: pointer;" title="Click to Back"><button
                        (click)="backButton()" class="homeicon"><span><mat-icon>home</mat-icon></span></button>
                </div>
            </div>
            <form [formGroup]="staffAssignForm" (ngSubmit)="save()">
                <div class="row">
                    <div class="col-sm-6 mt-3" style="display: flex;">
                        <div style="float: left;width: 150px;text-align: left;">
                            <label class="pt-2" style="margin: auto;">Batch<span class="text-danger"> *</span></label>
                        </div>
                        <div style="float: left;width: 250px;">
                            <input formControlName="batch_year" readonly class="form-control" type="text" required>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 mt-3" style="display: flex;">
                        <div style="float: left;width: 150px;text-align: left;">
                            <label class="pt-2" style="margin: auto;">Class<span class="text-danger"> *</span></label>
                        </div>
                        <div style="float: left;width: 250px;">
                            <select
                                [ngClass]="{'is-invalid': staffAssignForm.get('classid')?.touched && staffAssignForm.get('classid')?.errors}"
                                formControlName="classid" style="width: 100%;" #t (change)="FilterGroupfun(t.value)"
                                class="form-control" required>
                                <option value=null selected disabled>Please select</option>
                                <option value={{class.classid}} *ngFor="let class of ClassList;">
                                    {{class.class_name}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div *ngIf="groupDisplay == true" class="col-sm-6 mt-3" style="display: flex;">
                        <div style="float: left;width: 150px;text-align: left;">
                            <label class="pt-2" style="margin: auto;">Group</label>
                        </div>
                        <div style="float: left;width: 250px;">
                            <select formControlName="groupid" style="width: 100%;" #s
                                (change)="FilterSectionfun(s.value)" class="form-control">
                                <option value=0 selected disabled>Please select</option>
                                <option value={{group.groupid}} *ngFor="let group of groupFilterlist;">
                                    {{group.group_name}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6 mt-3" style="display: flex;">
                        <div style="float: left;width: 150px;text-align: left;">
                            <label class="pt-2" style="margin: auto;">Section<span class="text-danger"> *</span></label>
                        </div>
                        <div style="float: left;width: 250px;">
                            <select
                                [ngClass]="{'is-invalid': staffAssignForm.get('sectionid')?.touched && staffAssignForm.get('sectionid')?.errors}"
                                formControlName="sectionid" style="width: 100%;" class="form-control" required>
                                <option value=null selected disabled>Please select</option>
                                <option [ngValue]="section.sectionid" *ngFor="let section of sectionFilterlist;">
                                    {{section.section_name}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 mt-3">
                    <div style="text-align: center;">
                        <button (click)="searchSubjectByClass()" matTooltip="Click to Search" type="button"
                            class="btn btn-primary btn-sm ">Search<i class="fa fa-search ml-2"></i></button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6 mt-3" style="display: flex;">
                        <div style="float: left;width: 150px;text-align: left;">
                            <label class="pt-2" style="margin: auto;">Class incharge</label>
                        </div>
                        <div style="float: left;width: 250px;">
                            <select #st (change)="staffNameChange(st.value)" formControlName="class_incharge"
                                style="width: 100%;" class="form-control ">
                                <option value='' selected disabled>Please select</option>
                                <option value={{Staff.staff_no}} *ngFor="let Staff of staffList;">
                                    {{Staff.staff_no}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-sm-6 mt-3" style="display: flex;">
                        <div style="float: left;width: 150px;text-align: left;">
                            <label class="pt-2" style="margin: auto;">Staff Name</label>
                        </div>
                        <div style="float: left;width: 250px;">
                            <input readonly formControlName="staff_name" class="form-control" type="text" required>
                        </div>
                    </div>
                </div>

                <div class="table-responsive mt-5">
                    <table class="col-sm-12 table table-hover table-bordered table-sm">
                        <thead>
                            <tr>
                                <th>Si.No</th>
                                <th>Subject Name</th>
                                <th>Primary Staff</th>
                                <th>Additional Staff</th>
                            </tr>
                        </thead>
                        <tbody formArrayName="subjects">
                            <tr *ngFor="let chid of staffAssignForm.get('subjects')['controls']; let i = index"
                                formGroupName="{{i}}">
                                <td>{{i+1}}</td>
                                <td><input formControlName="subjectsname" class="form-control shadow-none"
                                        style="border: 0px;" readonly type="text">
                                </td>
                                <td> <select formControlName="pm_staff_no" style="width: 100%;" class="form-control ">
                                        <option value='' selected disabled>Please select</option>
                                        <option value={{Staff.staff_no}} *ngFor="let Staff of staffList;">
                                            {{Staff.staff_no}} - {{Staff.staff_name}}</option>
                                    </select></td>
                                <td> <select formControlName="ad_staff_no" style="width: 100%;" class="form-control ">
                                        <option value='' selected disabled>Please select</option>
                                        <option value={{Staff.staff_no}} *ngFor="let Staff of staffList;">
                                            {{Staff.staff_no}} - {{Staff.staff_name}}</option>
                                    </select></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="col-sm-12 mt-4 mb-1">
                        <div style="text-align: center;">
                            <input matTooltip="Click to Save" type="submit" style="width: 80px;"
                                class="btn btn-primary mr-3 btn-sm" value="Save" />
                            <input matTooltip="Click to Cancel" type="button" (click)="cancelClick()"
                                style="width: 80px;" class="btn btn-danger btn-sm mr-2" value="Cancel" />
                        </div>
                    </div>

                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>